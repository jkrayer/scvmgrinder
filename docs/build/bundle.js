var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let i,l;function u(t,e){return i||(i=document.createElement("a")),i.href=e,t===i.href}function a(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function c(t,e,n,r){if(t){const o=p(t,e,n,r);return t[0](o)}}function p(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function d(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}function f(t,e,n,r,o,s){if(o){const i=p(e,n,r,s);t.p(i,o)}}function m(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function h(t){return null==t?"":t}function g(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function x(){return w(" ")}function C(){return w("")}function k(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function _(t){return function(e){return e.preventDefault(),t.call(this,e)}}function q(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function j(t){return""===t?null:+t}function S(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function T(t,e){t.value=null==e?"":e}function A(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function O(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function R(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function N(t,e,n){t.classList[n?"add":"remove"](e)}function M(t){l=t}function I(){if(!l)throw new Error("Function called outside component initialization");return l}const E=[],D=[],P=[],H=[],L=Promise.resolve();let B=!1;function z(t){P.push(t)}const G=new Set;let F=0;function U(){const t=l;do{for(;F<E.length;){const t=E[F];F++,M(t),J(t.$$)}for(M(null),E.length=0,F=0;D.length;)D.pop()();for(let t=0;t<P.length;t+=1){const e=P[t];G.has(e)||(G.add(e),e())}P.length=0}while(E.length);for(;H.length;)H.pop()();B=!1,G.clear(),M(t)}function J(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}const K=new Set;let W;function V(){W={r:0,c:[],p:W}}function X(){W.r||r(W.c),W=W.p}function Y(t,e){t&&t.i&&(K.delete(t),t.i(e))}function Q(t,e,n,r){if(t&&t.o){if(K.has(t))return;K.add(t),W.c.push((()=>{K.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function Z(t,e){Q(t,1,1,(()=>{e.delete(t.key)}))}function tt(t){t&&t.c()}function et(t,n,s,i){const{fragment:l,on_mount:u,on_destroy:a,after_update:c}=t.$$;l&&l.m(n,s),i||z((()=>{const n=u.map(e).filter(o);a?a.push(...n):r(n),t.$$.on_mount=[]})),c.forEach(z)}function nt(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(t,e){-1===t.$$.dirty[0]&&(E.push(t),B||(B=!0,L.then(U)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(e,o,s,i,u,a,c,p=[-1]){const d=l;M(e);const f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:o.target||d.$$.root};c&&c(f.root);let m=!1;if(f.ctx=s?s(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&u(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&rt(e,t)),n})):[],f.update(),m=!0,r(f.before_update),f.fragment=!!i&&i(f.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);f.fragment&&f.fragment.l(t),t.forEach(v)}else f.fragment&&f.fragment.c();o.intro&&Y(e.$$.fragment),et(e,o.target,o.anchor,o.customElement),U()}M(d)}class st{$destroy(){nt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function it(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function lt(t){return function e(n){return 0===arguments.length||it(n)?e:t.apply(this,arguments)}}function ut(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return it(n)?e:lt((function(e){return t(n,e)}));default:return it(n)&&it(r)?e:it(n)?lt((function(e){return t(e,r)})):it(r)?lt((function(e){return t(n,e)})):t(n,r)}}}function at(t,e){var n;e=e||[];var r=(t=t||[]).length,o=e.length,s=[];for(n=0;n<r;)s[s.length]=t[n],n+=1;for(n=0;n<o;)s[s.length]=e[n],n+=1;return s}function ct(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,o){return e.apply(this,arguments)};case 5:return function(t,n,r,o,s){return e.apply(this,arguments)};case 6:return function(t,n,r,o,s,i){return e.apply(this,arguments)};case 7:return function(t,n,r,o,s,i,l){return e.apply(this,arguments)};case 8:return function(t,n,r,o,s,i,l,u){return e.apply(this,arguments)};case 9:return function(t,n,r,o,s,i,l,u,a){return e.apply(this,arguments)};case 10:return function(t,n,r,o,s,i,l,u,a,c){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function pt(t,e,n){return function(){for(var r=[],o=0,s=t,i=0;i<e.length||o<arguments.length;){var l;i<e.length&&(!it(e[i])||o>=arguments.length)?l=e[i]:(l=arguments[o],o+=1),r[i]=l,it(l)||(s-=1),i+=1}return s<=0?n.apply(this,r):ct(s,pt(t,r,n))}}var dt=ut((function(t,e){return 1===t?lt(e):ct(t,pt(t,[],e))}));function ft(t){return function e(n,r,o){switch(arguments.length){case 0:return e;case 1:return it(n)?e:ut((function(e,r){return t(n,e,r)}));case 2:return it(n)&&it(r)?e:it(n)?ut((function(e,n){return t(e,r,n)})):it(r)?ut((function(e,r){return t(n,e,r)})):lt((function(e){return t(n,r,e)}));default:return it(n)&&it(r)&&it(o)?e:it(n)&&it(r)?ut((function(e,n){return t(e,n,o)})):it(n)&&it(o)?ut((function(e,n){return t(e,r,n)})):it(r)&&it(o)?ut((function(e,r){return t(n,e,r)})):it(n)?lt((function(e){return t(e,r,o)})):it(r)?lt((function(e){return t(n,e,o)})):it(o)?lt((function(e){return t(n,r,e)})):t(n,r,o)}}}var mt=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function ht(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function gt(t,e,n){return function(){if(0===arguments.length)return n();var r=arguments[arguments.length-1];if(!mt(r)){for(var o=0;o<t.length;){if("function"==typeof r[t[o]])return r[t[o]].apply(r,Array.prototype.slice.call(arguments,0,-1));o+=1}if(ht(r)){var s=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return s(r)}}return n.apply(this,arguments)}}var yt=function(){return this.xf["@@transducer/init"]()},vt=function(t){return this.xf["@@transducer/result"](t)};function bt(t){return"[object String]"===Object.prototype.toString.call(t)}var $t=lt((function(t){return!!mt(t)||!!t&&("object"==typeof t&&(!bt(t)&&(0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),wt=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();var xt=ut((function(t,e){return ct(t.length,(function(){return t.apply(e,arguments)}))}));function Ct(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function kt(t,e,n,r){return t["@@transducer/result"](n[r](xt(t["@@transducer/step"],t),e))}var _t="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function qt(t,e,n){if("function"==typeof t&&(t=function(t){return new wt(t)}(t)),$t(n))return function(t,e,n){for(var r=0,o=n.length;r<o;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return kt(t,e,n,"fantasy-land/reduce");if(null!=n[_t])return Ct(t,e,n[_t]());if("function"==typeof n.next)return Ct(t,e,n);if("function"==typeof n.reduce)return kt(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var jt=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=yt,t.prototype["@@transducer/result"]=vt,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),St=ut((function(t,e){return new jt(t,e)}));function Tt(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var At=Object.prototype.toString,Ot=function(){return"[object Arguments]"===At.call(arguments)?function(t){return"[object Arguments]"===At.call(t)}:function(t){return Tt("callee",t)}}(),Rt=!{toString:null}.propertyIsEnumerable("toString"),Nt=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Mt=function(){return arguments.propertyIsEnumerable("length")}(),It=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},Et="function"!=typeof Object.keys||Mt?lt((function(t){if(Object(t)!==t)return[];var e,n,r=[],o=Mt&&Ot(t);for(e in t)!Tt(e,t)||o&&"length"===e||(r[r.length]=e);if(Rt)for(n=Nt.length-1;n>=0;)Tt(e=Nt[n],t)&&!It(r,e)&&(r[r.length]=e),n-=1;return r})):lt((function(t){return Object(t)!==t?[]:Object.keys(t)})),Dt=ut(gt(["fantasy-land/map","map"],St,(function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return dt(e.length,(function(){return t.call(this,e.apply(this,arguments))}));case"[object Object]":return qt((function(n,r){return n[r]=t(e[r]),n}),{},Et(e));default:return function(t,e){for(var n=0,r=e.length,o=Array(r);n<r;)o[n]=t(e[n]),n+=1;return o}(t,e)}}))),Pt=Dt,Ht=Number.isInteger||function(t){return t<<0===t},Lt=ut((function(t,e){var n=t<0?e.length+t:t;return bt(e)?e.charAt(n):e[n]})),Bt=ut((function(t,e){if(null!=e)return Ht(t)?Lt(t,e):e[t]})),zt=ft(qt),Gt=lt((function(t){return function(){return t}})),Ft=ut((function(t,e){return"function"==typeof e["fantasy-land/ap"]?e["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(e):"function"==typeof t?function(n){return t(n)(e(n))}:qt((function(t,n){return at(t,Pt(n,e))}),[],t)})),Ut=lt((function(t){return null==t}));var Jt=ut((function(t,e){var n=dt(t,e);return dt(t,(function(){return qt(Ft,Pt(n,arguments[0]),Array.prototype.slice.call(arguments,1))}))})),Kt=lt((function(t){return Jt(t.length,t)})),Wt=ft((function(t,e,n){if(t>e)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<t?t:n>e?e:n})),Vt=lt((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function Xt(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function Yt(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return mt(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var Qt=lt(Yt("tail",ft(Yt("slice",(function(t,e,n){return Array.prototype.slice.call(n,t,e)})))(1,1/0)));function Zt(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return ct(arguments[0].length,zt(Xt,arguments[0],Qt(arguments)))}var te=lt((function(t){return bt(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function ee(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Zt.apply(this,te(arguments))}var ne=Lt(0);function re(t){return t}var oe=lt(re);function se(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function ie(t,e,n){for(var r=0,o=n.length;r<o;){if(t(e,n[r]))return!0;r+=1}return!1}var le="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};function ue(t,e,n,r){var o=se(t);function s(t,e){return ae(t,e,n.slice(),r.slice())}return!ie((function(t,e){return!ie(s,e,t)}),se(e),o)}function ae(t,e,n,r){if(le(t,e))return!0;var o,s,i=Vt(t);if(i!==Vt(e))return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(o=t.constructor,null==(s=String(o).match(/^function (\w*)/))?"":s[1]))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!le(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!le(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var l=n.length-1;l>=0;){if(n[l]===t)return r[l]===e;l-=1}switch(i){case"Map":return t.size===e.size&&ue(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&ue(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=Et(t);if(u.length!==Et(e).length)return!1;var a=n.concat([t]),c=r.concat([e]);for(l=u.length-1;l>=0;){var p=u[l];if(!Tt(p,e)||!ae(e[p],t[p],a,c))return!1;l-=1}return!0}var ce=ut((function(t,e){return ae(t,e,[],[])}));function pe(t){return"[object Object]"===Object.prototype.toString.call(t)}var de=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=yt,t.prototype["@@transducer/result"]=vt,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),fe=ut(gt(["fantasy-land/filter","filter"],ut((function(t,e){return new de(t,e)})),(function(t,e){return pe(e)?qt((function(n,r){return t(e[r])&&(n[r]=e[r]),n}),{},Et(e)):function(t,e){for(var n=0,r=e.length,o=[];n<r;)t(e[n])&&(o[o.length]=e[n]),n+=1;return o}(t,e)}))),me=ut((function(t,e){return t||e})),he=ut((function(t,e){return function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e}(t)?function(){return t.apply(this,arguments)||e.apply(this,arguments)}:Kt(me)(t,e)})),ge=he;var ye=lt((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():mt(t)?[]:bt(t)?"":pe(t)?{}:Ot(t)?function(){return arguments}():function(t){var e=Object.prototype.toString.call(t);return"[object Uint8ClampedArray]"===e||"[object Int8Array]"===e||"[object Uint8Array]"===e||"[object Int16Array]"===e||"[object Uint16Array]"===e||"[object Int32Array]"===e||"[object Uint32Array]"===e||"[object Float32Array]"===e||"[object Float64Array]"===e||"[object BigInt64Array]"===e||"[object BigUint64Array]"===e}(t)?t.constructor.from(""):void 0})),ve=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=yt,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n;return this.f(e)&&(this.found=!0,t=(n=this.xf["@@transducer/step"](t,e))&&n["@@transducer/reduced"]?n:{"@@transducer/value":n,"@@transducer/reduced":!0}),t},t}(),be=ut(gt(["find"],ut((function(t,e){return new ve(t,e)})),(function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return e[n];n+=1}}))),$e=ft((function(t,e,n){return dt(Math.max(t.length,e.length,n.length),(function(){return t.apply(this,arguments)?e.apply(this,arguments):n.apply(this,arguments)}))})),we=$e,xe=lt((function(t){return null!=t&&ce(t,ye(t))}));function Ce(t){return ut((function(e,n){return ct(Math.max(0,e.length-n.length),(function(){return e.apply(this,t(n,arguments))}))}))}var ke=Ce(at),_e=ft((function(t,e,n){return ce(e,Bt(t,n))})),qe=ft((function(t,e,n){return t(Bt(e,n))})),je=ut((function(t,e){return Array.prototype.slice.call(e,0).sort((function(e,n){var r=t(e),o=t(n);return r<o?-1:r>o?1:0}))}));const Se=[];function Te(e,n=t){let r;const o=new Set;function i(t){if(s(e,t)&&(e=t,r)){const t=!Se.length;for(const t of o)t[1](),Se.push(t,e);if(t){for(let t=0;t<Se.length;t+=2)Se[t][0](Se[t+1]);Se.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,l=t){const u=[s,l];return o.add(u),1===o.size&&(r=n(i)||t),s(e),()=>{o.delete(u),0===o.size&&(r(),r=null)}}}}const Ae="settings",Oe=Te({selectedCharacterId:null,newCharacter:!1,menuOpen:!1},(t=>(t({...JSON.parse(localStorage.getItem(Ae)||"{}"),menuOpen:!1}),(t,e,n,r)=>console.log("settings sub",t,e,n,r))));Oe.subscribe((t=>{localStorage.setItem(Ae,JSON.stringify(t))}));const Re=t=>Oe.update((e=>({...e,selectedCharacterId:t,newCharacter:!1}))),Ne=t=>Oe.update((t=>({...t,selectedCharacterId:null,newCharacter:!0}))),Me=(t=!1)=>Oe.update((e=>({...e,menuOpen:t})));function Ie(t){let e,n,r,o,s,i;return{c(){e=$("div"),n=$("label"),n.textContent="Quantity",r=x(),o=$("input"),q(n,"class","small svelte-1twro6u"),q(n,"for","quantity"),q(o,"type","number"),q(o,"id","quantity"),q(o,"class","theme-black-input"),q(o,"min","1"),q(o,"max","20"),q(e,"class","svelte-1twro6u")},m(l,u){y(l,e,u),g(e,n),g(e,r),g(e,o),T(o,t[0].quantity),s||(i=k(o,"input",t[7]),s=!0)},p(t,e){1&e&&j(o.value)!==t[0].quantity&&T(o,t[0].quantity)},d(t){t&&v(e),s=!1,i()}}}function Ee(t){let e,n,o,s,i,l,u,a,c,p,d,f,m,h,b,w,_="ranged"===t[0].weaponType&&Pe(t);return{c(){e=$("div"),n=$("label"),n.textContent="Weapon Type",o=x(),s=$("select"),i=$("option"),i.textContent="Melee",l=$("option"),l.textContent="Ranged",u=$("option"),u.textContent="Thrown",a=x(),c=$("div"),p=$("label"),p.textContent="Damage",d=x(),f=$("input"),m=x(),_&&_.c(),h=C(),q(n,"class","small svelte-1twro6u"),q(n,"for","weapon-type"),i.__value="melee",i.value=i.__value,l.__value="ranged",l.value=l.__value,u.__value="thrown",u.value=u.__value,q(s,"id","weapon-type"),q(s,"class","theme-black-input"),void 0===t[0].weaponType&&z((()=>t[3].call(s))),q(e,"class","svelte-1twro6u"),q(p,"class","small svelte-1twro6u"),q(p,"for","damage"),q(f,"type","text"),q(f,"id","damage"),q(f,"class","theme-black-input"),q(f,"placeholder","1d6"),q(c,"class","svelte-1twro6u")},m(r,v){y(r,e,v),g(e,n),g(e,o),g(e,s),g(s,i),g(s,l),g(s,u),O(s,t[0].weaponType),y(r,a,v),y(r,c,v),g(c,p),g(c,d),g(c,f),T(f,t[0].damageDie),y(r,m,v),_&&_.m(r,v),y(r,h,v),b||(w=[k(s,"change",t[3]),k(f,"input",t[4])],b=!0)},p(t,e){1&e&&O(s,t[0].weaponType),1&e&&f.value!==t[0].damageDie&&T(f,t[0].damageDie),"ranged"===t[0].weaponType?_?_.p(t,e):(_=Pe(t),_.c(),_.m(h.parentNode,h)):_&&(_.d(1),_=null)},d(t){t&&v(e),t&&v(a),t&&v(c),t&&v(m),_&&_.d(t),t&&v(h),b=!1,r(w)}}}function De(t){let e,n,r,o,s,i,l,u,a,c,p;return{c(){e=$("div"),n=$("label"),n.textContent="Armor Type",r=x(),o=$("select"),s=$("option"),s.textContent="Select",i=$("option"),i.textContent="Shield",l=$("option"),l.textContent="Light Armor",u=$("option"),u.textContent="Medium Armor",a=$("option"),a.textContent="Heavy Armor",q(n,"class","small svelte-1twro6u"),q(n,"for","armor-type"),s.__value="",s.value=s.__value,i.__value="shield",i.value=i.__value,l.__value="light",l.value=l.__value,u.__value="medium",u.value=u.__value,a.__value="heavy",a.value=a.__value,q(o,"class","theme-black-input"),q(o,"id","armor-type"),o.autofocus=!0,void 0===t[0].armorType&&z((()=>t[2].call(o))),q(e,"class","svelte-1twro6u")},m(d,f){y(d,e,f),g(e,n),g(e,r),g(e,o),g(o,s),g(o,i),g(o,l),g(o,u),g(o,a),O(o,t[0].armorType),o.focus(),c||(p=k(o,"change",t[2]),c=!0)},p(t,e){1&e&&O(o,t[0].armorType)},d(t){t&&v(e),c=!1,p()}}}function Pe(t){let e,n,o,s,i,l,u,a,c,p,d,f,m,h;return{c(){e=$("div"),n=$("label"),n.textContent="Ammunition Type",o=x(),s=$("select"),i=$("option"),i.textContent="Arrow",l=$("option"),l.textContent="Bolt",u=$("option"),u.textContent="Rock",a=x(),c=$("div"),p=$("label"),p.textContent="Ammunition count",d=x(),f=$("input"),q(n,"class","small svelte-1twro6u"),q(n,"for","ammunition-type"),i.__value="arrow",i.value=i.__value,l.__value="bolt",l.value=l.__value,u.__value="rock",u.value=u.__value,q(s,"id","ammunition-type"),q(s,"class","theme-black-input"),void 0===t[0].ammoType&&z((()=>t[5].call(s))),q(e,"class","svelte-1twro6u"),q(p,"class","small svelte-1twro6u"),q(p,"for","ammunition-count"),q(f,"type","number"),q(f,"id","ammunition-count"),q(f,"class","theme-black-input"),q(f,"min","0"),q(f,"max","20"),q(c,"class","svelte-1twro6u")},m(r,v){y(r,e,v),g(e,n),g(e,o),g(e,s),g(s,i),g(s,l),g(s,u),O(s,t[0].ammoType),y(r,a,v),y(r,c,v),g(c,p),g(c,d),g(c,f),T(f,t[0].ammoCount),m||(h=[k(s,"change",t[5]),k(f,"input",t[6])],m=!0)},p(t,e){1&e&&O(s,t[0].ammoType),1&e&&j(f.value)!==t[0].ammoCount&&T(f,t[0].ammoCount)},d(t){t&&v(e),t&&v(a),t&&v(c),m=!1,r(h)}}}function He(t){let e,n,s,i,l,u,a,c;return{c(){e=$("div"),n=$("label"),n.textContent="Description",s=x(),i=$("input"),l=x(),u=$("button"),u.textContent="-",q(n,"class","small svelte-1twro6u"),q(n,"for","description"),q(i,"type","text"),q(i,"id","description"),q(i,"class","theme-black-input"),q(u,"type","button"),q(u,"class","btn svelte-1twro6u"),q(u,"title","Remove Equipment"),q(e,"class","svelte-1twro6u")},m(r,p){y(r,e,p),g(e,n),g(e,s),g(e,i),T(i,t[0].description),g(e,l),g(e,u),a||(c=[k(i,"input",t[8]),k(u,"click",(function(){o(t[1])&&t[1].apply(this,arguments)}))],a=!0)},p(e,n){t=e,1&n&&i.value!==t[0].description&&T(i,t[0].description)},d(t){t&&v(e),a=!1,r(c)}}}function Le(e){let n,r,o,s,i,l,u=e[0].type+"";function a(t,e){return"armor"===t[0].type?De:"weapon"===t[0].type?Ee:"equipment"===t[0].type?Ie:void 0}let c=a(e),p=c&&c(e),d=""!==e[0].type&&He(e);return{c(){n=$("fieldset"),r=$("h3"),o=w(u),s=x(),i=$("div"),p&&p.c(),l=x(),d&&d.c(),q(r,"class","h3 svelte-1twro6u"),q(i,"class","fields svelte-1twro6u"),q(n,"class","eq svelte-1twro6u")},m(t,e){y(t,n,e),g(n,r),g(r,o),g(n,s),g(n,i),p&&p.m(i,null),g(i,l),d&&d.m(i,null)},p(t,[e]){1&e&&u!==(u=t[0].type+"")&&S(o,u),c===(c=a(t))&&p?p.p(t,e):(p&&p.d(1),p=c&&c(t),p&&(p.c(),p.m(i,l))),""!==t[0].type?d?d.p(t,e):(d=He(t),d.c(),d.m(i,null)):d&&(d.d(1),d=null)},i:t,o:t,d(t){t&&v(n),p&&p.d(),d&&d.d()}}}function Be(t,e,n){let{item:r={}}=e,{onRemove:o=(()=>{})}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item),"onRemove"in t&&n(1,o=t.onRemove)},[r,o,function(){r.armorType=R(this),n(0,r)},function(){r.weaponType=R(this),n(0,r)},function(){r.damageDie=this.value,n(0,r)},function(){r.ammoType=R(this),n(0,r)},function(){r.ammoCount=j(this.value),n(0,r)},function(){r.quantity=j(this.value),n(0,r)},function(){r.description=this.value,n(0,r)}]}class ze extends st{constructor(t){super(),ot(this,t,Be,Le,s,{item:0,onRemove:1})}}const Ge=Te({},(t=>{const{selectedCharacterId:e}=JSON.parse(localStorage.getItem("settings")||"{}");return void 0!==e&&t(JSON.parse(localStorage.getItem(`character:${e}`)||"{}")),(t,e,n,r)=>console.log("nomoresubs",t,e,n,r)}));Ge.subscribe((t=>{const{id:e}=t;localStorage.setItem(`character:${e}`,JSON.stringify(t))}));const Fe=t=>{const e=localStorage.getItem(`character:${t}`);Re(t),Ge.update((()=>JSON.parse(e)))},Ue=t=>e=>{const{_id:n,equipped:r}=e;return{...e,equipped:t===n?!r:r}},Je=t=>Ge.update((e=>{const{equipment:n}=e;return{...e,equipment:Pt(Ue(t),n)}})),Ke=t=>Ge.update((e=>{const n=e.equipment.map((e=>e._id!==t?e:{...e,broken:!0}));return{...e,equipment:n}})),We=()=>Ge.update((t=>{const{current:e,maximum:n}=t.hitpoints;return e<n?{...t,hitpoints:{current:e+1,maximum:n}}:t})),Ve=t=>Ge.update((e=>{const{current:n,maximum:r}=e.hitpoints;return{...e,hitpoints:{current:Wt(1,r,n+t),maximum:r}}})),Xe=()=>Ge.update((t=>{const{current:e,maximum:n}=t.hitpoints;return{...t,hitpoints:{current:e-1,maximum:n}}})),Ye=t=>Ge.update((e=>{const{equipment:n}=e;return{...e,equipment:n.filter(((e,n)=>n!==t))}})),Qe=t=>Ge.update((e=>{const{equipment:n}=e,r=n.reduce(((e,n)=>{if(n._id!==t)return e.concat(n);const r=n.quantity-1;return 0===r?e:e.concat({...n,quantity:r})}),[]);return{...e,equipment:r}})),Ze=t=>Ge.update((e=>{const{equipment:n}=e,r=n.map((e=>{if(e._id!==t)return e;const n=e.quantity+1;return n*e.weight<=100?{...e,quantity:n}:acc}));return{...e,equipment:r}})),tn=t=>Ge.update((e=>{const{silver:n}=e,r=n+t;return{...e,silver:r}})),en="characters",nn=Te([],(t=>(t(JSON.parse(localStorage.getItem(en)||"[]")),(t,e,n,r)=>console.log("characters unsub",t,e,n,r))));nn.subscribe((t=>{localStorage.setItem(en,JSON.stringify(t))}));const rn=t=>0===t?`±${t}`:t>0?`+${t}`:t,on=t=>Math.floor(Math.random()*t)+1,sn=([t,,e,n,r])=>{let o=0;for(let n=0;n<t;n++)o+=on(e);switch(n){case"+":o+=r;break;case"-":o-=r;break;case"x":o*=r}return o},ln=t=>parseInt(t,10);ee((t=>isNaN(t)?0:t),ln);const un=t=>{const e=t.indexOf("d");let n=-1===(r=t.search(/[-x\+]/))?1/0:r;var r;let o=n+1;const s=[ln(t.slice(0,e)),"d",ln(t.slice(e+1,n))];return n===1/0?s:[...s,t.slice(n,o),ln(t.slice(o))]},an=ee(sn,un);ee(Bt(2),un);const cn=(t,e)=>n=>{const r=n+e;alert(`D20 ${n} + ${e} = ${r}; ${r>=t?"Hits":"Misses"} DR${t}`)},pn=()=>1e16*Math.random()+Date.now(),dn=Pt((t=>{const{type:e,weaponType:n,armorType:r}=t;return"ranged"===n?{...t,_id:pn(),usesAmmo:!0}:"armor"===e&&"shield"!==r?{...t,_id:pn(),...{light:{currentTier:1,maxTier:1},medium:{currentTier:2,maxTier:2},heavy:{currentTier:3,maxTier:3}}[r]}:{...t,_id:pn()}}));function fn(t,e,n){const r=t.slice();return r[1]=e[n],r[25]=n,r}function mn(t){let e,n;return e=new ze({props:{item:t[1],onRemove:t[5](t[25])}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.item=t[1]),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function hn(t){let e,n,o,s,i,l,u,a,c,p,d,f,m,h,C,A,R,N,M,I,E,D,P,H,L,B,G,F,U,J,K,W,Z,tt,et,nt,rt,ot,st,it,lt,ut,at,ct,pt,dt,ft,mt,ht,gt,yt,vt,bt,$t,wt,xt,Ct,kt,_t,qt,jt,St,Tt,At,Ot,Rt,Nt,Mt,It,Et,Dt,Pt,Ht,Lt,Bt,zt,Gt,Ft,Ut,Jt,Kt,Wt,Vt,Xt,Yt,Qt,Zt,te,ee,ne,re,oe,se,ie,le,ue,ae,ce,pe,de,fe,me,he,ge,ye,ve,be,$e,we,xe,Ce,ke,_e,qe,je,Se,Te,Ae,Oe,Re,Ne,Me,Ie,Ee,De,Pe,He,Le,Be=(t[0].name?t[2](t[0].name):"your")+"",ze=(t[0].name?t[2](t[0].name):"You")+"",Ge=t[0].name?`${t[0].name} has`:"you have",Fe=(t[0].name||"you")+"",Ue=t[0].equipment,Je=[];for(let e=0;e<Ue.length;e+=1)Je[e]=mn(fn(t,Ue,e));const Ke=t=>Q(Je[t],1,1,(()=>{Je[t]=null}));return{c(){e=$("div"),n=$("form"),o=$("div"),s=$("p"),i=$("label"),i.textContent="Name",l=x(),u=$("input"),a=x(),c=$("span"),c.innerHTML='emerges from the wastes with a fist full of <label class="inline bigger svelte-aadgwo" for="silver">Silver</label>',p=x(),d=$("input"),f=w(",\n        "),m=$("span"),m.innerHTML='a waterskin and an amount of <label class="inline bigger svelte-aadgwo" for="food">food</label>',h=x(),C=$("input"),A=x(),R=$("div"),N=$("div"),M=$("p"),I=w("The weight of equipment compresses "),E=w(Be),D=w(" spine."),P=x();for(let t=0;t<Je.length;t+=1)Je[t].c();H=x(),L=$("p"),B=$("select"),G=$("option"),G.textContent="Select",F=$("option"),F.textContent="Armor",U=$("option"),U.textContent="Weapon",J=$("option"),J.textContent="Equipment",K=$("option"),K.textContent="Follower",W=x(),Z=$("button"),Z.textContent="+",tt=x(),et=$("div"),nt=$("p"),nt.textContent="With scant natural abilities",rt=x(),ot=$("div"),st=$("label"),st.textContent="Agility",it=x(),lt=$("input"),ut=x(),at=$("label"),at.textContent="Presence",ct=x(),pt=$("input"),dt=x(),ft=$("label"),ft.textContent="Strength",mt=x(),ht=$("input"),gt=x(),yt=$("label"),yt.textContent="Toughness",vt=x(),bt=$("input"),$t=x(),wt=$("label"),wt.textContent="Hit Points",xt=x(),Ct=$("input"),kt=x(),_t=$("div"),qt=$("div"),jt=$("span"),jt.textContent="tests",St=x(),Tt=$("div"),At=$("div"),Ot=$("label"),Ot.textContent="Agility",Rt=x(),Nt=$("input"),Mt=x(),It=$("label"),It.textContent="Presence",Et=x(),Dt=$("input"),Pt=x(),Ht=$("label"),Ht.textContent="Strength",Lt=x(),Bt=$("input"),zt=x(),Gt=$("label"),Gt.textContent="Toughness",Ft=x(),Ut=$("input"),Jt=x(),Kt=$("div"),Wt=$("label"),Wt.textContent="Melee",Vt=x(),Xt=$("input"),Yt=x(),Qt=$("label"),Qt.textContent="Ranged",Zt=x(),te=$("input"),ee=x(),ne=$("label"),ne.textContent="Defense",re=x(),oe=$("input"),se=x(),ie=$("p"),le=w(ze),ue=w(" mettle will be tested."),ae=x(),ce=$("div"),pe=$("div"),de=$("p"),fe=$("span"),me=w("perhaps "),he=w(Ge),ge=w(" a  "),ye=$("label"),ye.textContent="profession",ve=w(" …"),be=x(),$e=$("input"),we=x(),xe=$("p"),Ce=$("span"),Ce.textContent="…perhaps not",ke=x(),_e=$("input"),qe=x(),je=$("label"),je.textContent="(Omens Die).",Se=x(),Te=$("div"),Te.innerHTML='<div><p class="calligraphy svelte-aadgwo">Scribe your epitaph…</p> \n          <textarea name="description" id="description" class="theme-black-input" cols="30" rows="10" style="width:100%;"></textarea> \n          <label class="hidden svelte-aadgwo" for="description">Description</label> \n          <p class="calligraphy text-right svelte-aadgwo">…no one else will.</p></div>',Ae=x(),Oe=$("div"),Re=$("p"),Ne=w("there is no saviour, but "),Me=w(Fe),Ie=w(" may yet "),Ee=$("button"),Ee.textContent="survive",De=w("."),q(i,"class","hidden svelte-aadgwo"),q(i,"for","name"),q(u,"type","text"),q(u,"id","name"),q(u,"class","theme-black-input"),q(c,"class","calligraphy svelte-aadgwo"),q(d,"type","number"),q(d,"id","silver"),q(d,"class","theme-black-input"),q(d,"min","10"),q(d,"max","300"),q(m,"class","calligraphy svelte-aadgwo"),q(C,"type","number"),q(C,"id","food"),q(C,"class","theme-black-input"),q(C,"min","1"),q(C,"max","4"),q(o,"class","pod svelte-aadgwo"),q(M,"class","calligraphy svelte-aadgwo"),G.__value="",G.value=G.__value,F.__value="armor",F.value=F.__value,U.__value="weapon",U.value=U.__value,J.__value="equipment",J.value=J.__value,K.__value="follower",K.value=K.__value,q(B,"class","theme-black-input calligraphy smaller svelte-aadgwo"),void 0===t[1]&&z((()=>t[9].call(B))),q(Z,"type","button"),q(Z,"class","calligraphy btn svelte-aadgwo"),q(Z,"title","Add Equipment"),q(L,"class","text-right svelte-aadgwo"),q(R,"class","pod svelte-aadgwo"),q(nt,"class","calligraphy svelte-aadgwo"),q(st,"for","agility"),q(lt,"type","number"),q(lt,"id","agility"),q(lt,"class","theme-black-input"),q(lt,"min","-3"),q(lt,"max","3"),q(at,"for","presence"),q(pt,"type","number"),q(pt,"id","presence"),q(pt,"class","theme-black-input"),q(pt,"min","-3"),q(pt,"max","3"),q(ft,"for","strength"),q(ht,"type","number"),q(ht,"id","strength"),q(ht,"class","theme-black-input"),q(ht,"min","-3"),q(ht,"max","3"),q(yt,"for","toughness"),q(bt,"type","number"),q(bt,"id","toughness"),q(bt,"class","theme-black-input"),q(bt,"min","-3"),q(bt,"max","3"),q(wt,"for","hitpoints"),q(Ct,"type","number"),q(Ct,"id","hitpoints"),q(Ct,"class","theme-black-input"),q(Ct,"min","1"),q(Ct,"max","20"),q(et,"class","pod svelte-aadgwo"),q(jt,"class","calligraphy svelte-aadgwo"),q(Ot,"for","agility-test"),q(Nt,"type","number"),q(Nt,"id","agility-test"),q(Nt,"class","theme-black-input"),q(Nt,"min","-3"),q(Nt,"max","3"),q(It,"for","presence-test"),q(Dt,"type","number"),q(Dt,"id","presence-test"),q(Dt,"class","theme-black-input"),q(Dt,"min","-3"),q(Dt,"max","3"),q(Ht,"for","strength-test"),q(Bt,"type","number"),q(Bt,"id","strength-test"),q(Bt,"class","theme-black-input"),q(Bt,"min","-3"),q(Bt,"max","3"),q(Gt,"for","toughness-test"),q(Ut,"type","number"),q(Ut,"id","toughness-test"),q(Ut,"class","theme-black-input"),q(Ut,"min","-3"),q(Ut,"max","3"),q(Wt,"for","melee"),q(Xt,"type","number"),q(Xt,"id","melee"),q(Xt,"class","theme-black-input"),q(Xt,"min","-3"),q(Xt,"max","3"),q(Qt,"for","ranged"),q(te,"type","number"),q(te,"id","ranged"),q(te,"class","theme-black-input"),q(te,"min","-3"),q(te,"max","3"),q(ne,"for","defense"),q(oe,"type","number"),q(oe,"id","defense"),q(oe,"class","theme-black-input"),q(oe,"min","-3"),q(oe,"max","3"),q(Tt,"class","r svelte-aadgwo"),q(ie,"class","calligraphy right-aligned svelte-aadgwo"),q(_t,"class","pod svelte-aadgwo"),q(ye,"class","bigger inline svelte-aadgwo"),q(ye,"for","className"),q(fe,"class","calligraphy svelte-aadgwo"),q($e,"type","text"),q($e,"id","className"),q($e,"class","theme-black-input"),q(Ce,"class","calligraphy svelte-aadgwo"),q(_e,"type","number"),q(_e,"id","omens"),q(_e,"class","theme-black-input"),q(_e,"min","0"),q(_e,"max","4"),q(je,"class","calligraphy smaller inline svelte-aadgwo"),q(je,"for","omens"),q(xe,"class","text-right svelte-aadgwo"),q(ce,"class","pod svelte-aadgwo"),q(Te,"class","pad svelte-aadgwo"),q(Ee,"class","btn svelte-aadgwo"),q(Ee,"type","submit"),q(Re,"class","calligraphy svelte-aadgwo"),q(Oe,"class","pad svelte-aadgwo"),n.noValidate=!0,q(n,"id","new-character-form"),q(n,"class","svelte-aadgwo"),q(e,"class","theme-black")},m(r,v){y(r,e,v),g(e,n),g(n,o),g(o,s),g(s,i),g(s,l),g(s,u),T(u,t[0].name),g(s,a),g(s,c),g(s,p),g(s,d),T(d,t[0].silver),g(s,f),g(s,m),g(s,h),g(s,C),T(C,t[0].food),g(n,A),g(n,R),g(R,N),g(N,M),g(M,I),g(M,E),g(M,D),g(N,P);for(let t=0;t<Je.length;t+=1)Je[t].m(N,null);g(N,H),g(N,L),g(L,B),g(B,G),g(B,F),g(B,U),g(B,J),g(B,K),O(B,t[1]),g(L,W),g(L,Z),g(n,tt),g(n,et),g(et,nt),g(et,rt),g(et,ot),g(ot,st),g(ot,it),g(ot,lt),T(lt,t[0].abilities.agility),g(ot,ut),g(ot,at),g(ot,ct),g(ot,pt),T(pt,t[0].abilities.presence),g(ot,dt),g(ot,ft),g(ot,mt),g(ot,ht),T(ht,t[0].abilities.strength),g(ot,gt),g(ot,yt),g(ot,vt),g(ot,bt),T(bt,t[0].abilities.toughness),g(ot,$t),g(ot,wt),g(ot,xt),g(ot,Ct),T(Ct,t[0].hitpoints),g(n,kt),g(n,_t),g(_t,qt),g(qt,jt),g(qt,St),g(qt,Tt),g(Tt,At),g(At,Ot),g(At,Rt),g(At,Nt),T(Nt,t[0].tests.agility),g(At,Mt),g(At,It),g(At,Et),g(At,Dt),T(Dt,t[0].tests.presence),g(At,Pt),g(At,Ht),g(At,Lt),g(At,Bt),T(Bt,t[0].tests.strength),g(At,zt),g(At,Gt),g(At,Ft),g(At,Ut),T(Ut,t[0].tests.toughness),g(Tt,Jt),g(Tt,Kt),g(Kt,Wt),g(Kt,Vt),g(Kt,Xt),T(Xt,t[0].tests.melee),g(Kt,Yt),g(Kt,Qt),g(Kt,Zt),g(Kt,te),T(te,t[0].tests.ranged),g(Kt,ee),g(Kt,ne),g(Kt,re),g(Kt,oe),T(oe,t[0].tests.defense),g(_t,se),g(_t,ie),g(ie,le),g(ie,ue),g(n,ae),g(n,ce),g(ce,pe),g(pe,de),g(de,fe),g(fe,me),g(fe,he),g(fe,ge),g(fe,ye),g(fe,ve),g(de,be),g(de,$e),T($e,t[0].className),g(pe,we),g(pe,xe),g(xe,Ce),g(xe,ke),g(xe,_e),T(_e,t[0].omens),g(xe,qe),g(xe,je),g(n,Se),g(n,Te),g(n,Ae),g(n,Oe),g(Oe,Re),g(Re,Ne),g(Re,Me),g(Re,Ie),g(Re,Ee),g(Re,De),Pe=!0,He||(Le=[k(u,"input",t[6]),k(d,"input",t[7]),k(C,"input",t[8]),k(B,"change",t[9]),k(Z,"click",t[4]),k(lt,"input",t[10]),k(pt,"input",t[11]),k(ht,"input",t[12]),k(bt,"input",t[13]),k(Ct,"input",t[14]),k(Nt,"input",t[15]),k(Dt,"input",t[16]),k(Bt,"input",t[17]),k(Ut,"input",t[18]),k(Xt,"input",t[19]),k(te,"input",t[20]),k(oe,"input",t[21]),k($e,"input",t[22]),k(_e,"input",t[23]),k(n,"submit",_(t[3]))],He=!0)},p(t,[e]){if(1&e&&u.value!==t[0].name&&T(u,t[0].name),1&e&&j(d.value)!==t[0].silver&&T(d,t[0].silver),1&e&&j(C.value)!==t[0].food&&T(C,t[0].food),(!Pe||1&e)&&Be!==(Be=(t[0].name?t[2](t[0].name):"your")+"")&&S(E,Be),33&e){let n;for(Ue=t[0].equipment,n=0;n<Ue.length;n+=1){const r=fn(t,Ue,n);Je[n]?(Je[n].p(r,e),Y(Je[n],1)):(Je[n]=mn(r),Je[n].c(),Y(Je[n],1),Je[n].m(N,H))}for(V(),n=Ue.length;n<Je.length;n+=1)Ke(n);X()}2&e&&O(B,t[1]),1&e&&j(lt.value)!==t[0].abilities.agility&&T(lt,t[0].abilities.agility),1&e&&j(pt.value)!==t[0].abilities.presence&&T(pt,t[0].abilities.presence),1&e&&j(ht.value)!==t[0].abilities.strength&&T(ht,t[0].abilities.strength),1&e&&j(bt.value)!==t[0].abilities.toughness&&T(bt,t[0].abilities.toughness),1&e&&j(Ct.value)!==t[0].hitpoints&&T(Ct,t[0].hitpoints),1&e&&j(Nt.value)!==t[0].tests.agility&&T(Nt,t[0].tests.agility),1&e&&j(Dt.value)!==t[0].tests.presence&&T(Dt,t[0].tests.presence),1&e&&j(Bt.value)!==t[0].tests.strength&&T(Bt,t[0].tests.strength),1&e&&j(Ut.value)!==t[0].tests.toughness&&T(Ut,t[0].tests.toughness),1&e&&j(Xt.value)!==t[0].tests.melee&&T(Xt,t[0].tests.melee),1&e&&j(te.value)!==t[0].tests.ranged&&T(te,t[0].tests.ranged),1&e&&j(oe.value)!==t[0].tests.defense&&T(oe,t[0].tests.defense),(!Pe||1&e)&&ze!==(ze=(t[0].name?t[2](t[0].name):"You")+"")&&S(le,ze),(!Pe||1&e)&&Ge!==(Ge=t[0].name?`${t[0].name} has`:"you have")&&S(he,Ge),1&e&&$e.value!==t[0].className&&T($e,t[0].className),1&e&&j(_e.value)!==t[0].omens&&T(_e,t[0].omens),(!Pe||1&e)&&Fe!==(Fe=(t[0].name||"you")+"")&&S(Me,Fe)},i(t){if(!Pe){for(let t=0;t<Ue.length;t+=1)Y(Je[t]);Pe=!0}},o(t){Je=Je.filter(Boolean);for(let t=0;t<Je.length;t+=1)Q(Je[t]);Pe=!1},d(t){t&&v(e),b(Je,t),He=!1,r(Le)}}}function gn(t,e,n){let r="",o={name:"",silver:null,food:null,abilities:{agility:null,presence:null,strength:null,toughness:null},hitpoints:null,tests:{agility:12,presence:12,strength:12,toughness:12,melee:12,ranged:12,defense:12},className:null,omens:2,description:null,equipment:[]};return t.$$.update=()=>{1&t.$$.dirty&&console.log(o,typeof o.food)},[o,r,t=>t.endsWith("s")?`${t}'`:`${t}'s`,()=>(t=>{const e=Date.now().toString();localStorage.setItem(`character:${e}`,JSON.stringify({id:e,...t})),nn.update((t=>[...t,e])),Re(e),Fe(e)})((t=>{const{food:e,hitpoints:n,omens:r,equipment:o,...s}=t;return{...s,hitpoints:{maximum:n,current:n},omens:{die:r,maximum:r,current:an(`1d${r}`)},powers:an(`1d4+${s.abilities.presence}`),equipment:[{_id:pn(),description:"A waterskin with # days of water",quantity:4},{_id:pn(),description:"# day(s) worth of food",quantity:e},...dn(o)]}})(o)),()=>{if(""===r)return!1;n(0,o.equipment=[...o.equipment,{type:r,quantity:1}],o),n(1,r="")},t=>()=>n(0,o.equipment=o.equipment.filter(((e,n)=>n!==t)),o),function(){o.name=this.value,n(0,o)},function(){o.silver=j(this.value),n(0,o)},function(){o.food=j(this.value),n(0,o)},function(){r=R(this),n(1,r)},function(){o.abilities.agility=j(this.value),n(0,o)},function(){o.abilities.presence=j(this.value),n(0,o)},function(){o.abilities.strength=j(this.value),n(0,o)},function(){o.abilities.toughness=j(this.value),n(0,o)},function(){o.hitpoints=j(this.value),n(0,o)},function(){o.tests.agility=j(this.value),n(0,o)},function(){o.tests.presence=j(this.value),n(0,o)},function(){o.tests.strength=j(this.value),n(0,o)},function(){o.tests.toughness=j(this.value),n(0,o)},function(){o.tests.melee=j(this.value),n(0,o)},function(){o.tests.ranged=j(this.value),n(0,o)},function(){o.tests.defense=j(this.value),n(0,o)},function(){o.className=this.value,n(0,o)},function(){o.omens=j(this.value),n(0,o)}]}class yn extends st{constructor(t){super(),ot(this,t,gn,hn,s,{})}}function vn(t){let e,n,r,o;const s=t[5].default,i=c(s,t,t[4],null),l=i||function(t){let e;return{c(){e=w(t[0])},m(t,n){y(t,e,n)},p(t,n){1&n&&S(e,t[0])},d(t){t&&v(e)}}}(t);return{c(){e=$("button"),l&&l.c(),q(e,"type","button"),q(e,"class","roll-button svelte-1j9bcfm"),e.disabled=t[1]},m(s,i){y(s,e,i),l&&l.m(e,null),n=!0,r||(o=k(e,"click",t[2]),r=!0)},p(t,[r]){i?i.p&&(!n||16&r)&&f(i,s,t,t[4],n?d(s,t[4],r,null):m(t[4]),null):l&&l.p&&(!n||1&r)&&l.p(t,n?r:-1),(!n||2&r)&&(e.disabled=t[1])},i(t){n||(Y(l,t),n=!0)},o(t){Q(l,t),n=!1},d(t){t&&v(e),l&&l.d(t),r=!1,o()}}}function bn(t,e,n){let{$$slots:r={},$$scope:o}=e,{diceString:s=""}=e,{onRoll:i=(t=>{})}=e,{disabled:l=!1}=e;return t.$$set=t=>{"diceString"in t&&n(0,s=t.diceString),"onRoll"in t&&n(3,i=t.onRoll),"disabled"in t&&n(1,l=t.disabled),"$$scope"in t&&n(4,o=t.$$scope)},[s,l,()=>i(an(s)),i,o,r]}class $n extends st{constructor(t){super(),ot(this,t,bn,vn,s,{diceString:0,onRoll:3,disabled:1})}}function wn(t,e,n){const r=t.slice();return r[4]=e[n],r}function xn(e){let n,r,o=e[1][e[4]]+"";return{c(){n=w("test "),r=w(o)},m(t,e){y(t,n,e),y(t,r,e)},p:t,d(t){t&&v(n),t&&v(r)}}}function Cn(t){let e,n;return e=new $n({props:{diceString:"1d20",onRoll:cn(t[1].ranged,t[2][t[4]]),$$slots:{default:[qn]},$$scope:{ctx:t}}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};128&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function kn(t){let e,n;return e=new $n({props:{diceString:"1d20",onRoll:cn(t[1].defence,t[2][t[4]]),$$slots:{default:[jn]},$$scope:{ctx:t}}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};128&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function _n(t){let e,n;return e=new $n({props:{diceString:"1d20",onRoll:cn(t[1].melee,t[2][t[4]]),$$slots:{default:[Sn]},$$scope:{ctx:t}}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};128&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function qn(e){let n,r,o=e[1].ranged+"";return{c(){n=w("ranged "),r=w(o)},m(t,e){y(t,n,e),y(t,r,e)},p:t,d(t){t&&v(n),t&&v(r)}}}function jn(e){let n,r,o=e[1].defence+"";return{c(){n=w("defense "),r=w(o)},m(t,e){y(t,n,e),y(t,r,e)},p:t,d(t){t&&v(n),t&&v(r)}}}function Sn(e){let n,r,o=e[1].melee+"";return{c(){n=w("melee "),r=w(o)},m(t,e){y(t,n,e),y(t,r,e)},p:t,d(t){t&&v(n),t&&v(r)}}}function Tn(t){let e,n,r,o,s,i,l,u,a,c,p,d,f,m=t[4]+"",h=rn(t[2][t[4]])+"";u=new $n({props:{diceString:"1d20",onRoll:cn(t[1][t[4]],t[2][t[4]]),$$slots:{default:[xn]},$$scope:{ctx:t}}});const b=[_n,kn,Cn],C=[];return~(c=function(t,e){return"strength"===t[4]?0:"agility"===t[4]?1:"presence"===t[4]?2:-1}(t))&&(p=C[c]=b[c](t)),{c(){e=$("div"),n=$("div"),r=w(m),o=x(),s=$("div"),i=w(h),l=x(),tt(u.$$.fragment),a=x(),p&&p.c(),d=x(),q(n,"class","score-name"),q(s,"class","score"),q(e,"class","score-wrapper svelte-1h6nalv")},m(t,p){y(t,e,p),g(e,n),g(n,r),g(e,o),g(e,s),g(s,i),g(e,l),et(u,e,null),g(e,a),~c&&C[c].m(e,null),g(e,d),f=!0},p(t,e){const n={};128&e&&(n.$$scope={dirty:e,ctx:t}),u.$set(n),p&&p.p(t,e)},i(t){f||(Y(u.$$.fragment,t),Y(p),f=!0)},o(t){Q(u.$$.fragment,t),Q(p),f=!1},d(t){t&&v(e),nt(u),~c&&C[c].d()}}}function An(t){let e,n,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=Tn(wn(t,r,e));const s=t=>Q(o[t],1,1,(()=>{o[t]=null}));return{c(){e=$("div");for(let t=0;t<o.length;t+=1)o[t].c();q(e,"class","row row-padded r svelte-1h6nalv")},m(t,r){y(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){if(7&n){let i;for(r=t[0],i=0;i<r.length;i+=1){const s=wn(t,r,i);o[i]?(o[i].p(s,n),Y(o[i],1)):(o[i]=Tn(s),o[i].c(),Y(o[i],1),o[i].m(e,null))}for(V(),i=r.length;i<o.length;i+=1)s(i);X()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Y(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)Q(o[t]);n=!1},d(t){t&&v(e),b(o,t)}}}function On(t,e,n){let r;a(t,Ge,(t=>n(3,r=t)));const{tests:o,abilities:s}=r;return[["strength","agility","presence","toughness"],o,s]}class Rn extends st{constructor(t){super(),ot(this,t,On,An,s,{})}}function Nn(t){let e,n,r,s,i,l,u;const a=t[3].default,p=c(a,t,t[2],null);return{c(){e=$("div"),n=$("button"),n.textContent="close",r=x(),s=$("div"),p&&p.c(),q(n,"type","button"),q(n,"class","close svelte-1tzls3z"),q(s,"class","content svelte-1tzls3z"),q(e,"class","modal svelte-1tzls3z"),A(e,"transform",t[0]?"translate3d(0, 0, 0)":"",!1)},m(a,c){y(a,e,c),g(e,n),g(e,r),g(e,s),p&&p.m(s,null),i=!0,l||(u=k(n,"click",(function(){o(t[1])&&t[1].apply(this,arguments)})),l=!0)},p(n,[r]){t=n,p&&p.p&&(!i||4&r)&&f(p,a,t,t[2],i?d(a,t[2],r,null):m(t[2]),null),1&r&&A(e,"transform",t[0]?"translate3d(0, 0, 0)":"",!1)},i(t){i||(Y(p,t),i=!0)},o(t){Q(p,t),i=!1},d(t){t&&v(e),p&&p.d(t),l=!1,u()}}}function Mn(t,e,n){let{$$slots:r={},$$scope:o}=e,{show:s=!1}=e,{onClose:i=(()=>{})}=e;const l=t=>"Escape"===t.key?i():null;var u;return u=()=>{s?document.body.addEventListener("keydown",l):document.body.removeEventListener("keydown",l)},I().$$.after_update.push(u),function(t){I().$$.on_destroy.push(t)}((()=>document.body.removeEventListener("keydown",l))),t.$$set=t=>{"show"in t&&n(0,s=t.show),"onClose"in t&&n(1,i=t.onClose),"$$scope"in t&&n(2,o=t.$$scope)},[s,i,o,r]}class In extends st{constructor(t){super(),ot(this,t,Mn,Nn,s,{show:0,onClose:1})}}function En(t){let e,n,s,i,l,u,a,c,p,d,f,m,h,b,C,_,j,S,T;return{c(){e=$("div"),n=$("p"),s=w("Catch your breath, \n      "),i=$("button"),l=w("have a drink\n      "),a=w(". Restore d4 HP."),c=x(),p=$("div"),d=$("p"),f=w("A\n      "),m=$("button"),h=w("full night’s sleep"),C=w("\n       restores d6 HP."),_=x(),j=$("button"),j.textContent="Cancel",q(i,"type","button"),q(i,"class","mb0"),i.disabled=u=t[4]||0===t[3].quantity,q(e,"class","svelte-i61tr3"),N(e,"s",t[4]||0===t[3].quantity),q(m,"type","button"),q(m,"class","mb0"),m.disabled=b=t[4]||0===t[2].quantity,q(p,"class","svelte-i61tr3"),N(p,"s",t[4]||0===t[2].quantity),q(j,"type","button")},m(r,u){y(r,e,u),g(e,n),g(n,s),g(n,i),g(i,l),g(n,a),y(r,c,u),y(r,p,u),g(p,d),g(d,f),g(d,m),g(m,h),g(d,C),y(r,_,u),y(r,j,u),S||(T=[k(i,"click",(function(){o(t[5](t[3]))&&t[5](t[3]).apply(this,arguments)})),k(m,"click",(function(){o(t[6](t[2]))&&t[6](t[2]).apply(this,arguments)})),k(j,"click",(function(){o(t[1])&&t[1].apply(this,arguments)}))],S=!0)},p(n,r){t=n,24&r&&u!==(u=t[4]||0===t[3].quantity)&&(i.disabled=u),24&r&&N(e,"s",t[4]||0===t[3].quantity),20&r&&b!==(b=t[4]||0===t[2].quantity)&&(m.disabled=b),20&r&&N(p,"s",t[4]||0===t[2].quantity)},d(t){t&&v(e),t&&v(c),t&&v(p),t&&v(_),t&&v(j),S=!1,r(T)}}}function Dn(t){let e,n;return e=new In({props:{show:t[0],onClose:t[1],$$slots:{default:[En]},$$scope:{ctx:t}}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.show=t[0]),2&n&&(r.onClose=t[1]),2078&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Pn(t,e,n){let r,o,s,i;a(t,Ge,(t=>n(7,i=t)));let{show:l=!1}=e,{onClose:u=(()=>{})}=e;const c=we(Ut,Gt({quantity:0}),oe),p=ee(c,ne,fe(_e("name","Waterskin"))),d=ee(c,ne,je(Bt("quantity")),fe(ge(_e("name","Dried food"),_e("name","Lard"))));return t.$$set=t=>{"show"in t&&n(0,l=t.show),"onClose"in t&&n(1,u=t.onClose)},t.$$.update=()=>{128&t.$$.dirty&&n(4,r=!!i.infected),128&t.$$.dirty&&n(3,o=p(i.equipment)),128&t.$$.dirty&&n(2,s=d(i.equipment))},[l,u,s,o,r,({_id:t})=>{Qe(t);const e=an("1d4");alert(`Healing ${e} points`),Ve(e),u()},({_id:t})=>{Qe(t);const e=an("1d6");alert(`Healing ${e} points`),Ve(e),u()},i]}class Hn extends st{constructor(t){super(),ot(this,t,Pn,Dn,s,{show:0,onClose:1})}}function Ln(t){let e,n,s,i,l,u,a,c,p,d,f,m,h,b,C,_=t[2]?.omens?.die+"",j=(t[2]?.omens?.current||0)+"";return{c(){e=$("div"),n=w("Omens: ("),s=w(_),i=w("/day); current ("),l=w(j),u=w(")\n        "),a=$("p"),a.textContent="Use omens to",c=x(),p=$("ul"),p.innerHTML="<li>deal maximum damage with one attack</li> \n            <li>reroll, your dice or someone else&#39;s</li> \n            <li>lower damage dealt to you by 1d6</li> \n            <li>neutralize a crit or a fumble</li> \n            <li>lower one test by DR -4</li>",d=x(),f=$("button"),f.textContent="Use",m=x(),h=$("button"),h.textContent="Cancel",q(f,"type","button"),q(h,"type","button")},m(r,v){y(r,e,v),g(e,n),g(e,s),g(e,i),g(e,l),g(e,u),g(e,a),g(e,c),g(e,p),g(e,d),g(e,f),g(e,m),g(e,h),b||(C=[k(f,"click",t[3]),k(h,"click",(function(){o(t[1])&&t[1].apply(this,arguments)}))],b=!0)},p(e,n){t=e,4&n&&_!==(_=t[2]?.omens?.die+"")&&S(s,_),4&n&&j!==(j=(t[2]?.omens?.current||0)+"")&&S(l,j)},d(t){t&&v(e),b=!1,r(C)}}}function Bn(t){let e,n;return e=new In({props:{show:t[0],onClose:t[1],$$slots:{default:[Ln]},$$scope:{ctx:t}}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.show=t[0]),2&n&&(r.onClose=t[1]),22&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function zn(t,e,n){let r;a(t,Ge,(t=>n(2,r=t)));let{show:o=!1}=e,{onClose:s=(()=>{})}=e;return t.$$set=t=>{"show"in t&&n(0,o=t.show),"onClose"in t&&n(1,s=t.onClose)},[o,s,r,()=>{Ge.update((t=>{const{current:e,die:n,maximum:r}=t.omens;return e>1?{...t,omens:{current:e-1,die:n,maximum:r}}:{...t,omens:{current:0,die:n,maximum:r}}})),s()}]}class Gn extends st{constructor(t){super(),ot(this,t,zn,Bn,s,{show:0,onClose:1})}}function Fn(t,e,n){const r=t.slice();return r[4]=e[n],r}function Un(e){let n,r,o,s,i,l=e[4].name+"",u=e[4].description+"";return{c(){n=$("li"),r=$("b"),o=w(l),s=x(),i=w(u)},m(t,e){y(t,n,e),g(n,r),g(r,o),g(n,s),g(n,i)},p:t,d(t){t&&v(n)}}}function Jn(t){let e,n,r,s,i,l,u,a,c,p,d,f,m,h,C,_,j=(t[2]?.powers||0)+"",T=t[3].length>0&&function(t){let e,n=t[3],r=[];for(let e=0;e<n.length;e+=1)r[e]=Un(Fn(t,n,e));return{c(){e=$("ul");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,n){y(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(8&o){let s;for(n=t[3],s=0;s<n.length;s+=1){const i=Fn(t,n,s);r[s]?r[s].p(i,o):(r[s]=Un(i),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&v(e),b(r,t)}}}(t);return{c(){e=$("div"),n=$("p"),r=w("Powers: (1d4/day); current ("),s=w(j),i=w(")"),l=x(),u=$("p"),u.textContent="Presence Test DR12. Success, the power is activated. Failure, take d2 points of damage and you are dizzy for the next hour. Powers can not be used during this time.",a=x(),c=$("p"),c.textContent="Available Powers "+(0===t[3].length?": none":":"),p=x(),T&&T.c(),d=x(),f=$("button"),f.textContent="Roll Prsence test, if successful onlock scrolls and enable thir effects, oin fail closse and take damage.",m=x(),h=$("button"),h.textContent="Cancel",q(h,"type","button")},m(v,b){y(v,e,b),g(e,n),g(n,r),g(n,s),g(n,i),g(e,l),g(e,u),g(e,a),g(e,c),g(e,p),T&&T.m(e,null),g(e,d),g(e,f),g(e,m),g(e,h),C||(_=k(h,"click",(function(){o(t[1])&&t[1].apply(this,arguments)})),C=!0)},p(e,n){t=e,4&n&&j!==(j=(t[2]?.powers||0)+"")&&S(s,j),t[3].length>0&&T.p(t,n)},d(t){t&&v(e),T&&T.d(),C=!1,_()}}}function Kn(t){let e,n;return e=new In({props:{show:t[0],onClose:t[1],$$slots:{default:[Jn]},$$scope:{ctx:t}}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.show=t[0]),2&n&&(r.onClose=t[1]),134&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Wn(t,e,n){let r;a(t,Ge,(t=>n(2,r=t)));let{show:o=!1}=e,{onClose:s=(()=>{})}=e;const i=r.equipment.filter((t=>"scroll"===t.type));return t.$$set=t=>{"show"in t&&n(0,o=t.show),"onClose"in t&&n(1,s=t.onClose)},[o,s,r,i]}class Vn extends st{constructor(t){super(),ot(this,t,Wn,Kn,s,{show:0,onClose:1})}}function Xn(t){let e,n,r,o,s,i,l,a;function c(t,e){return t[1]?Qn:Yn}let p=c(t),d=p(t);return{c(){e=$("button"),n=$("img"),s=x(),d.c(),i=C(),u(n.src,r="/images/switch_sm.png")||q(n,"src","/images/switch_sm.png"),q(n,"alt",""),q(n,"class","svelte-1uodjs9"),q(e,"type","button"),q(e,"class","button-tier svelte-1uodjs9"),q(e,"title",o="Show "+(t[1]?"Tiers":"Rolls"))},m(r,o){y(r,e,o),g(e,n),y(r,s,o),d.m(r,o),y(r,i,o),l||(a=k(e,"click",t[3]),l=!0)},p(t,n){2&n&&o!==(o="Show "+(t[1]?"Tiers":"Rolls"))&&q(e,"title",o),p===(p=c(t))&&d?d.p(t,n):(d.d(1),d=p(t),d&&(d.c(),d.m(i.parentNode,i)))},d(t){t&&v(e),t&&v(s),d.d(t),t&&v(i),l=!1,a()}}}function Yn(t){let e,n,o,s,i,l,u,a,c,p,d,f,m;return{c(){e=$("button"),n=w("1"),s=x(),i=$("button"),l=w("2"),a=x(),c=$("button"),p=w("3"),q(e,"type","button"),q(e,"class",o=h(1===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9"),q(e,"title","Tier 1, -d2"),q(i,"type","button"),q(i,"class",u=h(2===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9"),q(i,"title","Tier 2, -d4"),q(c,"type","button"),q(c,"class",d=h(3===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9"),q(c,"title","Tier 3, -d6")},m(r,o){y(r,e,o),g(e,n),y(r,s,o),y(r,i,o),g(i,l),y(r,a,o),y(r,c,o),g(c,p),f||(m=[k(e,"click",t[4](1)),k(i,"click",t[4](2)),k(c,"click",t[4](3))],f=!0)},p(t,n){1&n&&o!==(o=h(1===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9")&&q(e,"class",o),1&n&&u!==(u=h(2===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9")&&q(i,"class",u),1&n&&d!==(d=h(3===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9")&&q(c,"class",d)},d(t){t&&v(e),t&&v(s),t&&v(i),t&&v(a),t&&v(c),f=!1,r(m)}}}function Qn(t){let e,n,o,s,i,l,u,a,c,p,d,f,m,b,C,_;return{c(){e=$("button"),n=w("-d2"),i=x(),l=$("button"),u=w("-d4"),p=x(),d=$("button"),f=w("-d6"),q(e,"type","button"),q(e,"class",o=h(1===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9"),q(e,"title","-d2"),e.disabled=s=1!==t[0].currentTier,q(l,"type","button"),q(l,"class",a=h(2===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9"),q(l,"title","-d4"),l.disabled=c=2!==t[0].currentTier,q(d,"type","button"),q(d,"class",m=h(3===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9"),q(d,"title","-d6"),d.disabled=b=3!==t[0].currentTier},m(r,o){y(r,e,o),g(e,n),y(r,i,o),y(r,l,o),g(l,u),y(r,p,o),y(r,d,o),g(d,f),C||(_=[k(e,"click",t[6]),k(l,"click",t[7]),k(d,"click",t[8])],C=!0)},p(t,n){1&n&&o!==(o=h(1===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9")&&q(e,"class",o),1&n&&s!==(s=1!==t[0].currentTier)&&(e.disabled=s),1&n&&a!==(a=h(2===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9")&&q(l,"class",a),1&n&&c!==(c=2!==t[0].currentTier)&&(l.disabled=c),1&n&&m!==(m=h(3===t[0].currentTier?"current button-tier":"button-tier")+" svelte-1uodjs9")&&q(d,"class",m),1&n&&b!==(b=3!==t[0].currentTier)&&(d.disabled=b)},d(t){t&&v(e),t&&v(i),t&&v(l),t&&v(p),t&&v(d),C=!1,r(_)}}}function Zn(e){let n,r,o,s,i,l,u,a=(e[2]?e[0].name:"None")+"",c=e[2]&&Xn(e);return{c(){n=$("div"),r=$("div"),o=$("b"),o.textContent="Armor:",s=x(),i=w(a),l=x(),u=$("div"),c&&c.c(),q(r,"class","svelte-1uodjs9"),q(u,"class","svelte-1uodjs9"),q(n,"class","row-padded r svelte-1uodjs9")},m(t,e){y(t,n,e),g(n,r),g(r,o),g(r,s),g(r,i),g(n,l),g(n,u),c&&c.m(u,null)},p(t,[e]){5&e&&a!==(a=(t[2]?t[0].name:"None")+"")&&S(i,a),t[2]?c?c.p(t,e):(c=Xn(t),c.c(),c.m(u,null)):c&&(c.d(1),c=null)},i:t,o:t,d(t){t&&v(n),c&&c.d()}}}function tr(t,e,n){let r,o,s;a(t,Ge,(t=>n(5,s=t)));const i=ee(we(Ut,Gt({}),oe),ne,fe((t=>"armor"===t.type&&t.equipped)));let l=!0;return t.$$.update=()=>{32&t.$$.dirty&&n(0,r=i(s.equipment)),1&t.$$.dirty&&n(2,o=!xe(r))},[r,l,o,()=>n(1,l=!l),t=>()=>{return e=r._id,n=t,Ge.update((t=>{const r=t.equipment.map((t=>t._id===e?{...t,currentTier:n}:t));return{...t,equipment:r}}));var e,n},s,()=>alert(on(2)),()=>alert(on(4)),()=>alert(on(6))]}class er extends st{constructor(t){super(),ot(this,t,tr,Zn,s,{})}}function nr(t,e,n){const r=t.slice();r[14]=e[n];const o=typeof r[14].damageDie;r[15]=o;const s=r[1][r[14].weaponType];return r[16]=s,r}function rr(t){let e,n=rn(t[16].bonus)+"";return{c(){e=w(n)},m(t,n){y(t,e,n)},p(t,r){1&r&&n!==(n=rn(t[16].bonus)+"")&&S(e,n)},d(t){t&&v(e)}}}function or(t){let e,n,s,i,l,u,a,c,p,d,f,m,h,b,C,_,j,T=t[14].description+"",A=("string"===t[15]?t[14].damageDie:`d${t[14].damageDie}`)+"";function O(){return t[4](t[14])}return p=new $n({props:{diceString:"1d20",onRoll:t[16].roll,$$slots:{default:[rr]},$$scope:{ctx:t}}}),{c(){e=$("tr"),n=$("td"),s=w(T),i=x(),l=$("td"),u=$("button"),u.textContent="Break",a=x(),c=$("td"),tt(p.$$.fragment),d=x(),f=$("td"),m=$("button"),h=w(A),b=x(),q(u,"type","button"),q(m,"type","button"),q(m,"title","Damage")},m(r,v){y(r,e,v),g(e,n),g(n,s),g(e,i),g(e,l),g(l,u),g(e,a),g(e,c),et(p,c,null),g(e,d),g(e,f),g(f,m),g(m,h),g(e,b),C=!0,_||(j=[k(u,"click",(function(){o(ke(Ke,[t[14]._id]))&&ke(Ke,[t[14]._id]).apply(this,arguments)})),k(m,"click",O)],_=!0)},p(e,n){t=e,(!C||1&n)&&T!==(T=t[14].description+"")&&S(s,T);const r={};1&n&&(r.onRoll=t[16].roll),524289&n&&(r.$$scope={dirty:n,ctx:t}),p.$set(r),(!C||1&n)&&A!==(A=("string"===t[15]?t[14].damageDie:`d${t[14].damageDie}`)+"")&&S(h,A)},i(t){C||(Y(p.$$.fragment,t),C=!0)},o(t){Q(p.$$.fragment,t),C=!1},d(t){t&&v(e),nt(p),_=!1,r(j)}}}function sr(t){let e,n,r,o,s,i=t[0],l=[];for(let e=0;e<i.length;e+=1)l[e]=or(nr(t,i,e));const u=t=>Q(l[t],1,1,(()=>{l[t]=null}));return{c(){e=$("table"),n=$("thead"),n.innerHTML="<tr><th>Weapon</th> \n            <th></th> \n            <th>To Hit</th> \n            <th>Damage</th></tr>",r=x(),o=$("tbody");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,i){y(t,e,i),g(e,n),g(e,r),g(e,o);for(let t=0;t<l.length;t+=1)l[t].m(o,null);s=!0},p(t,[e]){if(7&e){let n;for(i=t[0],n=0;n<i.length;n+=1){const r=nr(t,i,n);l[n]?(l[n].p(r,e),Y(l[n],1)):(l[n]=or(r),l[n].c(),Y(l[n],1),l[n].m(o,null))}for(V(),n=i.length;n<l.length;n+=1)u(n);X()}},i(t){if(!s){for(let t=0;t<i.length;t+=1)Y(l[t]);s=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)Q(l[t]);s=!1},d(t){t&&v(e),b(l,t)}}}function ir(t,e,n){let r,o;a(t,Ge,(t=>n(3,o=t)));const{strength:s,presence:i}=o.abilities,{melee:l,ranged:u}=o.tests,c={melee:{bonus:s,roll:cn(l,s)},ranged:{bonus:i,roll:cn(u,i)}},p=qe((t=>"weapon"===t),"type"),d=qe((t=>!1===t||void 0===t),"broken"),f=qe((t=>!0===t),"equipped"),m=fe((t=>p(t)&&f(t)&&d(t))),h=t=>"string"==typeof t?an(t):on(t);return t.$$.update=()=>{8&t.$$.dirty&&n(0,r=m(o.equipment))},[r,c,h,o,t=>alert(h(t.damageDie))]}class lr extends st{constructor(t){super(),ot(this,t,ir,sr,s,{})}}function ur(e){let n,r,s,i,l,u,a,c,p,d=e[0].description+"",f=e[0].equipped?"Remove":"Equip";return{c(){n=$("div"),r=$("div"),s=w(d),i=x(),l=$("button"),u=w(f),q(l,"class","mb0"),q(l,"type","button"),l.disabled=a=e[0].broken,q(n,"class","r svelte-1m7g13q")},m(t,a){y(t,n,a),g(n,r),g(r,s),g(n,i),g(n,l),g(l,u),c||(p=k(l,"click",(function(){o(ke(Je,[e[0]._id]))&&ke(Je,[e[0]._id]).apply(this,arguments)})),c=!0)},p(t,[n]){e=t,1&n&&d!==(d=e[0].description+"")&&S(s,d),1&n&&f!==(f=e[0].equipped?"Remove":"Equip")&&S(u,f),1&n&&a!==(a=e[0].broken)&&(l.disabled=a)},i:t,o:t,d(t){t&&v(n),c=!1,p()}}}function ar(t,e,n){let{item:r={}}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class cr extends st{constructor(t){super(),ot(this,t,ar,ur,s,{item:0})}}function pr(e){let n,r,o,s=e[0].description+"";return{c(){n=$("div"),r=$("div"),o=w(s),q(n,"class","r svelte-18umlsd")},m(t,e){y(t,n,e),g(n,r),g(r,o)},p(t,[e]){1&e&&s!==(s=t[0].description+"")&&S(o,s)},i:t,o:t,d(t){t&&v(n)}}}function dr(t,e,n){let{item:r={}}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class fr extends st{constructor(t){super(),ot(this,t,dr,pr,s,{item:0})}}function mr(e){let n,s,i,l,u,a,c,p,d,f,m,h,b=e[0].description.replace("#",e[0].quantity)+"";return{c(){n=$("div"),s=$("div"),i=w(b),l=x(),u=$("div"),a=$("button"),c=w("+"),d=x(),f=$("button"),f.textContent="-",q(a,"class","mb0"),q(a,"type","button"),a.disabled=p=e[0].weight*e[0].quantity==100,q(f,"class","mb0"),q(f,"type","button"),q(n,"class","r svelte-39ftsm")},m(t,r){y(t,n,r),g(n,s),g(s,i),g(n,l),g(n,u),g(u,a),g(a,c),g(u,d),g(u,f),m||(h=[k(a,"click",(function(){o(ke(Ze,[e[0]._id]))&&ke(Ze,[e[0]._id]).apply(this,arguments)})),k(f,"click",(function(){o(ke(Qe,[e[0]._id]))&&ke(Qe,[e[0]._id]).apply(this,arguments)}))],m=!0)},p(t,[n]){e=t,1&n&&b!==(b=e[0].description.replace("#",e[0].quantity)+"")&&S(i,b),1&n&&p!==(p=e[0].weight*e[0].quantity==100)&&(a.disabled=p)},i:t,o:t,d(t){t&&v(n),m=!1,r(h)}}}function hr(t,e,n){let{item:r={}}=e;return t.$$set=t=>{"item"in t&&n(0,r=t.item)},[r]}class gr extends st{constructor(t){super(),ot(this,t,hr,mr,s,{item:0})}}function yr(t,e,n){const r=t.slice();return r[8]=e[n],r[10]=n,r}function vr(t){let e,n;return e=new fr({props:{item:t[8]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.item=t[8]),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function br(t){let e,n;return e=new gr({props:{item:t[8]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.item=t[8]),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function $r(t){let e,n;return e=new cr({props:{item:t[8]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.item=t[8]),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function wr(t,e){let n,r,s,i,l,u,a,c,p,d,f;const m=[$r,br,vr],h=[];function b(t,e){return 2&e&&(r=null),2&e&&(s=null),null==r&&(r=!!t[2](t[8])),r?0:(null==s&&(s=!!t[3](t[8])),s?1:2)}return i=b(e,-1),l=h[i]=m[i](e),{key:t,first:null,c(){n=$("li"),l.c(),u=x(),a=$("button"),a.textContent="Delete",c=x(),q(a,"type","button"),q(a,"class","mb0"),q(n,"class","list-item svelte-kbj1xw"),this.first=n},m(t,r){y(t,n,r),h[i].m(n,null),g(n,u),g(n,a),g(n,c),p=!0,d||(f=k(a,"click",(function(){o(ke(Ye,[e[10]]))&&ke(Ye,[e[10]]).apply(this,arguments)})),d=!0)},p(t,r){let o=i;i=b(e=t,r),i===o?h[i].p(e,r):(V(),Q(h[o],1,1,(()=>{h[o]=null})),X(),l=h[i],l?l.p(e,r):(l=h[i]=m[i](e),l.c()),Y(l,1),l.m(n,u))},i(t){p||(Y(l),p=!0)},o(t){Q(l),p=!1},d(t){t&&v(n),h[i].d(),d=!1,f()}}}function xr(t){let e,n,r,o,s,i,l,u,a=[],c=new Map,p=t[1].equipment;const d=t=>t[8]._id;for(let e=0;e<p.length;e+=1){let n=yr(t,p,e),r=d(n);c.set(r,a[e]=wr(r,n))}return{c(){e=$("div"),n=$("div"),r=$("h2"),r.textContent="Equipment",o=x(),s=$("p"),s.textContent=`Strength + 8 (${t[4]}) items or DR+2 on Agility/Strength tests`,i=x(),l=$("ul");for(let t=0;t<a.length;t+=1)a[t].c();q(r,"class","title svelte-kbj1xw"),q(s,"class","text svelte-kbj1xw"),q(n,"class","row r svelte-kbj1xw"),q(l,"class","list-clear list svelte-kbj1xw"),q(e,"class","equipment svelte-kbj1xw"),N(e,"encumbered",t[0])},m(t,c){y(t,e,c),g(e,n),g(n,r),g(n,o),g(n,s),g(e,i),g(e,l);for(let t=0;t<a.length;t+=1)a[t].m(l,null);u=!0},p(t,[n]){14&n&&(p=t[1].equipment,V(),a=function(t,e,n,r,o,s,i,l,u,a,c,p){let d=t.length,f=s.length,m=d;const h={};for(;m--;)h[t[m].key]=m;const g=[],y=new Map,v=new Map;for(m=f;m--;){const t=p(o,s,m),l=n(t);let u=i.get(l);u?r&&u.p(t,e):(u=a(l,t),u.c()),y.set(l,g[m]=u),l in h&&v.set(l,Math.abs(m-h[l]))}const b=new Set,$=new Set;function w(t){Y(t,1),t.m(l,c),i.set(t.key,t),c=t.first,f--}for(;d&&f;){const e=g[f-1],n=t[d-1],r=e.key,o=n.key;e===n?(c=e.first,d--,f--):y.has(o)?!i.has(r)||b.has(r)?w(e):$.has(o)?d--:v.get(r)>v.get(o)?($.add(r),w(e)):(b.add(o),d--):(u(n,i),d--)}for(;d--;){const e=t[d];y.has(e.key)||u(e,i)}for(;f;)w(g[f-1]);return g}(a,n,d,1,t,p,c,l,Z,wr,null,yr),X()),1&n&&N(e,"encumbered",t[0])},i(t){if(!u){for(let t=0;t<p.length;t+=1)Y(a[t]);u=!0}},o(t){for(let t=0;t<a.length;t+=1)Q(a[t]);u=!1},d(t){t&&v(e);for(let t=0;t<a.length;t+=1)a[t].d()}}}function Cr(t,e,n){let r,o,s;a(t,Ge,(t=>n(1,s=t)));const i=qe((t=>!!be(ce(t),["armor","weapon"])),"type"),l=qe((t=>t>1),"quantity"),u=8+s.abilities.strength,c=100*u;return t.$$.update=()=>{2&t.$$.dirty&&n(5,r=s.equipment.reduce(((t,e)=>t+(!1==!!e.equipped?e.weight*e.quantity:0)),0)),32&t.$$.dirty&&n(0,o=c<=r),33&t.$$.dirty&&console.log(20,r,o)},[o,s,i,l,u,r]}class kr extends st{constructor(t){super(),ot(this,t,Cr,xr,s,{})}}function _r(t){let e,n,r,o=t[2]>-1&&jr(t);return{c(){e=w(t[1]),n=x(),o&&o.c(),r=C()},m(t,s){y(t,e,s),y(t,n,s),o&&o.m(t,s),y(t,r,s)},p(t,n){2&n&&S(e,t[1]),t[2]>-1?o?o.p(t,n):(o=jr(t),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(t){t&&v(e),t&&v(n),o&&o.d(t),t&&v(r)}}}function qr(t){let e,n,o,s,i,l;return{c(){e=$("form"),n=$("input"),o=x(),s=$("button"),s.textContent="Submit",q(n,"type","number"),q(s,"type","submit"),q(e,"action","")},m(r,u){y(r,e,u),g(e,n),T(n,t[6]),g(e,o),g(e,s),i||(l=[k(n,"input",t[10]),k(e,"submit",_(t[8]))],i=!0)},p(t,e){64&e&&j(n.value)!==t[6]&&T(n,t[6])},d(t){t&&v(e),i=!1,r(l)}}}function jr(t){let e,n;return{c(){e=w("/"),n=w(t[2])},m(t,r){y(t,e,r),y(t,n,r)},p(t,e){4&e&&S(n,t[2])},d(t){t&&v(e),t&&v(n)}}}function Sr(t){let e,n,s,i,l;return{c(){e=$("button"),e.textContent="+",n=x(),s=$("button"),s.textContent="-",q(e,"type","button"),q(e,"class","btn svelte-tjd8m4"),q(e,"title","Increase by 1"),q(s,"type","button"),q(s,"class","btn svelte-tjd8m4"),q(s,"title","Reduce by 1P")},m(r,u){y(r,e,u),y(r,n,u),y(r,s,u),i||(l=[k(e,"click",(function(){o(t[3])&&t[3].apply(this,arguments)})),k(s,"click",(function(){o(t[4])&&t[4].apply(this,arguments)}))],i=!0)},p(e,n){t=e},d(t){t&&v(e),t&&v(n),t&&v(s),i=!1,r(l)}}}function Tr(e){let n,r,o,s,i,l,u,a,c;function p(t,e){return t[5]?qr:_r}let d=p(e),f=d(e),m=!e[5]&&Sr(e);return{c(){n=$("div"),r=$("div"),o=$("div"),s=x(),i=$("div"),f.c(),l=x(),u=$("div"),m&&m.c(),q(o,"class","score-name"),q(i,"class","score"),q(u,"class","col"),q(n,"class","hit-points row svelte-tjd8m4")},m(t,p){y(t,n,p),g(n,r),g(r,o),o.innerHTML=e[0],g(r,s),g(r,i),f.m(i,null),g(n,l),g(n,u),m&&m.m(u,null),a||(c=k(i,"click",e[7]),a=!0)},p(t,[e]){1&e&&(o.innerHTML=t[0]),d===(d=p(t))&&f?f.p(t,e):(f.d(1),f=d(t),f&&(f.c(),f.m(i,null))),t[5]?m&&(m.d(1),m=null):m?m.p(t,e):(m=Sr(t),m.c(),m.m(u,null))},i:t,o:t,d(t){t&&v(n),f.d(),m&&m.d(),a=!1,c()}}}function Ar(t,e,n){let{title:r=""}=e,{value:o=0}=e,{maxValue:s=-1}=e,{increment:i=(()=>{})}=e,{decrement:l=(()=>{})}=e,{set:u=(()=>{})}=e,a=!1,c=null;return t.$$set=t=>{"title"in t&&n(0,r=t.title),"value"in t&&n(1,o=t.value),"maxValue"in t&&n(2,s=t.maxValue),"increment"in t&&n(3,i=t.increment),"decrement"in t&&n(4,l=t.decrement),"set"in t&&n(9,u=t.set)},[r,o,s,i,l,a,c,()=>u?n(5,a=!0):null,()=>{u(c),n(6,c=null),n(5,a=!1)},u,function(){c=j(this.value),n(6,c)}]}class Or extends st{constructor(t){super(),ot(this,t,Ar,Tr,s,{title:0,value:1,maxValue:2,increment:3,decrement:4,set:9})}}function Rr(t){let e,n;return e=new Or({props:{title:'<abbr title="Hit Points">HP</abbr>',value:t[0].hitpoints.current,maxValue:t[0].hitpoints.maximum,increment:We,decrement:Xe,set:!1}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.value=t[0].hitpoints.current),1&n&&(r.maxValue=t[0].hitpoints.maximum),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Nr(t,e,n){let r;return a(t,Ge,(t=>n(0,r=t))),[r]}class Mr extends st{constructor(t){super(),ot(this,t,Nr,Rr,s,{})}}function Ir(t){let e,n,s,i,l,u,a,c,p,d,f,m,h,b,C,_,j,T,A,O=t[2].formula+"",R=t[2].roll+"",N=t[2].scoreName+"",M=t[2].score+"";return{c(){e=$("div"),n=$("button"),n.textContent="×",s=x(),i=$("div"),l=x(),u=$("div"),a=w(t[1]),c=x(),p=$("div"),d=w(O),f=w(" ("),m=w(R),h=w(") + "),b=w(N),C=w(" ("),_=w(M),j=w(")"),q(n,"type","button"),q(n,"class","close svelte-1cacpgq"),q(i,"class","die svelte-1cacpgq"),q(u,"class","roll svelte-1cacpgq"),q(p,"class","formula svelte-1cacpgq"),q(e,"class","overlay svelte-1cacpgq")},m(r,v){y(r,e,v),g(e,n),g(e,s),g(e,i),g(e,l),g(e,u),g(u,a),g(e,c),g(e,p),g(p,d),g(p,f),g(p,m),g(p,h),g(p,b),g(p,C),g(p,_),g(p,j),T||(A=[k(n,"click",(function(){o(t[0])&&t[0].apply(this,arguments)})),k(e,"click",(function(){o(t[0])&&t[0].apply(this,arguments)}))],T=!0)},p(e,n){t=e,2&n&&S(a,t[1]),4&n&&O!==(O=t[2].formula+"")&&S(d,O),4&n&&R!==(R=t[2].roll+"")&&S(m,R),4&n&&N!==(N=t[2].scoreName+"")&&S(b,N),4&n&&M!==(M=t[2].score+"")&&S(_,M)},d(t){t&&v(e),T=!1,r(A)}}}function Er(t){let e,n,r,o,s=null!==t[1]&&Ir(t);const i=t[5].default,l=c(i,t,t[4],null);return{c(){s&&s.c(),e=x(),l&&l.c()},m(i,u){s&&s.m(i,u),y(i,e,u),l&&l.m(i,u),n=!0,r||(o=k(window,"keyup",t[3]),r=!0)},p(t,[r]){null!==t[1]?s?s.p(t,r):(s=Ir(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),l&&l.p&&(!n||16&r)&&f(l,i,t,t[4],n?d(i,t[4],r,null):m(t[4]),null)},i(t){n||(Y(l,t),n=!0)},o(t){Q(l,t),n=!1},d(t){s&&s.d(t),t&&v(e),l&&l.d(t),r=!1,o()}}}function Dr(t,e,n){let{$$slots:r={},$$scope:o}=e,{onClose:s=(()=>{})}=e,{result:i}=e,{message:l={roll:0,scoreName:"Strength",score:0}}=e;return t.$$set=t=>{"onClose"in t&&n(0,s=t.onClose),"result"in t&&n(1,i=t.result),"message"in t&&n(2,l=t.message),"$$scope"in t&&n(4,o=t.$$scope)},[s,i,l,t=>"Escape"===t.key?s():null,o,r]}class Pr extends st{constructor(t){super(),ot(this,t,Dr,Er,s,{onClose:0,result:1,message:2})}}function Hr(t){let e,n,r,o,s,i,l,u,a=(t[2].initiative||0)+"";return{c(){e=$("div"),n=$("div"),r=$("div"),r.innerHTML='<abbr title="Initiative">Init</abbr>',o=x(),s=$("div"),i=w(a),q(r,"class","score-name"),q(s,"class","score"),q(e,"class","initiative row svelte-1e1bmdx")},m(a,c){y(a,e,c),g(e,n),g(n,r),g(n,o),g(n,s),g(s,i),l||(u=k(e,"click",t[4]),l=!0)},p(t,e){4&e&&a!==(a=(t[2].initiative||0)+"")&&S(i,a)},d(t){t&&v(e),l=!1,u()}}}function Lr(t){let e,n;return e=new Pr({props:{onClose:t[5],result:t[0],message:{formula:"1d6",scoreName:"Agility",score:t[3].agility,roll:t[1]},$$slots:{default:[Hr]},$$scope:{ctx:t}}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.onClose=t[5]),1&n&&(r.result=t[0]),2&n&&(r.message={formula:"1d6",scoreName:"Agility",score:t[3].agility,roll:t[1]}),68&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Br(t,e,n){let r;a(t,Ge,(t=>n(2,r=t)));const{abilities:o}=r;let s=null,i=1;return[s,i,r,o,()=>{var t,e;n(1,i=sn([1,"d",6])),n(0,s=i+o.agility),t=Ge,r.initiative=s,e=r,t.set(e)},()=>n(0,s=null)]}class zr extends st{constructor(t){super(),ot(this,t,Br,Lr,s,{})}}function Gr(t){let e,n,r,o,s,i,l,u,a,c,p,d,f,m=t[0].name+"",h=t[0].className+"";return c=new zr({}),d=new Mr({}),{c(){e=$("div"),n=$("header"),r=$("h1"),o=w(m),s=x(),i=$("h2"),l=w(h),u=x(),a=$("div"),tt(c.$$.fragment),p=x(),tt(d.$$.fragment),q(r,"class","h1 svelte-1hr8ad4"),q(i,"class","h2 svelte-1hr8ad4"),q(a,"class","hp-wrapper svelte-1hr8ad4"),q(e,"id","character-header"),q(e,"class","theme-black svelte-1hr8ad4")},m(t,m){y(t,e,m),g(e,n),g(n,r),g(r,o),g(n,s),g(n,i),g(i,l),g(e,u),g(e,a),et(c,a,null),g(a,p),et(d,a,null),f=!0},p(t,[e]){(!f||1&e)&&m!==(m=t[0].name+"")&&S(o,m),(!f||1&e)&&h!==(h=t[0].className+"")&&S(l,h)},i(t){f||(Y(c.$$.fragment,t),Y(d.$$.fragment,t),f=!0)},o(t){Q(c.$$.fragment,t),Q(d.$$.fragment,t),f=!1},d(t){t&&v(e),nt(c),nt(d)}}}function Fr(t,e,n){let r;return a(t,Ge,(t=>n(0,r=t))),[r]}class Ur extends st{constructor(t){super(),ot(this,t,Fr,Gr,s,{})}}function Jr(t){let e,n,o,s,i,l,u,a,c,p,d,f,m,h,b,C,_,j,T,A,O,R,N,M,I,E,D,P,H,L,B,z,G,F,U,J,K,W,V,X,Z,rt=t[3]?.omens?.current+"",ot=(t[3]?.powers||0)+"";return n=new Ur({}),s=new Rn({}),E=new er({}),P=new lr({}),L=new kr({}),z=new Or({props:{title:"Silver",value:t[3].silver,increment:ke(tn,[1]),decrement:ke(tn,[-1]),set:t[7]}}),F=new Gn({props:{show:t[0],onClose:t[8]}}),J=new Vn({props:{show:t[1],onClose:t[9]}}),W=new Hn({props:{show:t[2],onClose:t[10]}}),{c(){e=$("article"),tt(n.$$.fragment),o=x(),tt(s.$$.fragment),i=x(),l=$("div"),u=$("div"),a=$("button"),c=w("Omens ("),p=w(rt),d=w(")"),m=x(),h=$("div"),b=$("button"),C=w("Powers ("),_=w(ot),j=w(")"),A=x(),O=$("div"),R=$("button"),R.textContent="Rest",N=x(),M=$("div"),M.innerHTML='<button type="button" disabled="" class="b svelte-9vsq3q">Get Better</button>',I=x(),tt(E.$$.fragment),D=x(),tt(P.$$.fragment),H=x(),tt(L.$$.fragment),B=x(),tt(z.$$.fragment),G=x(),tt(F.$$.fragment),U=x(),tt(J.$$.fragment),K=x(),tt(W.$$.fragment),q(a,"type","button"),q(a,"class","b svelte-9vsq3q"),a.disabled=f=0===t[3]?.omens?.current,q(b,"type","button"),q(b,"class","b svelte-9vsq3q"),b.disabled=T=0===t[3]?.powers,q(R,"type","button"),q(R,"class","b svelte-9vsq3q"),q(l,"class","row row-padded")},m(r,f){y(r,e,f),et(n,e,null),g(e,o),et(s,e,null),g(e,i),g(e,l),g(l,u),g(u,a),g(a,c),g(a,p),g(a,d),g(l,m),g(l,h),g(h,b),g(b,C),g(b,_),g(b,j),g(l,A),g(l,O),g(O,R),g(l,N),g(l,M),g(e,I),et(E,e,null),g(e,D),et(P,e,null),g(e,H),et(L,e,null),g(e,B),et(z,e,null),g(e,G),et(F,e,null),g(e,U),et(J,e,null),g(e,K),et(W,e,null),V=!0,X||(Z=[k(a,"click",t[4]),k(b,"click",t[5]),k(R,"click",t[6])],X=!0)},p(t,e){(!V||8&e)&&rt!==(rt=t[3]?.omens?.current+"")&&S(p,rt),(!V||8&e&&f!==(f=0===t[3]?.omens?.current))&&(a.disabled=f),(!V||8&e)&&ot!==(ot=(t[3]?.powers||0)+"")&&S(_,ot),(!V||8&e&&T!==(T=0===t[3]?.powers))&&(b.disabled=T);const n={};8&e&&(n.value=t[3].silver),z.$set(n);const r={};1&e&&(r.show=t[0]),1&e&&(r.onClose=t[8]),F.$set(r);const o={};2&e&&(o.show=t[1]),2&e&&(o.onClose=t[9]),J.$set(o);const s={};4&e&&(s.show=t[2]),4&e&&(s.onClose=t[10]),W.$set(s)},i(t){V||(Y(n.$$.fragment,t),Y(s.$$.fragment,t),Y(E.$$.fragment,t),Y(P.$$.fragment,t),Y(L.$$.fragment,t),Y(z.$$.fragment,t),Y(F.$$.fragment,t),Y(J.$$.fragment,t),Y(W.$$.fragment,t),V=!0)},o(t){Q(n.$$.fragment,t),Q(s.$$.fragment,t),Q(E.$$.fragment,t),Q(P.$$.fragment,t),Q(L.$$.fragment,t),Q(z.$$.fragment,t),Q(F.$$.fragment,t),Q(J.$$.fragment,t),Q(W.$$.fragment,t),V=!1},d(t){t&&v(e),nt(n),nt(s),nt(E),nt(P),nt(L),nt(z),nt(F),nt(J),nt(W),X=!1,r(Z)}}}function Kr(t){let e,n,r=!xe(t[3]),o=r&&Jr(t);return{c(){o&&o.c(),e=C()},m(t,r){o&&o.m(t,r),y(t,e,r),n=!0},p(t,[n]){8&n&&(r=!xe(t[3])),r?o?(o.p(t,n),8&n&&Y(o,1)):(o=Jr(t),o.c(),Y(o,1),o.m(e.parentNode,e)):o&&(V(),Q(o,1,1,(()=>{o=null})),X())},i(t){n||(Y(o),n=!0)},o(t){Q(o),n=!1},d(t){o&&o.d(t),t&&v(e)}}}function Wr(t,e,n){let r;a(t,Ge,(t=>n(3,r=t)));let o=!1,s=!1,i=!1;return[o,s,i,r,()=>n(0,o=!0),()=>n(1,s=!0),()=>n(2,i=!0),t=>tn(t),()=>n(0,o=!1),()=>n(1,s=!1),()=>n(2,i=!1)]}class Vr extends st{constructor(t){super(),ot(this,t,Wr,Kr,s,{})}}const Xr=()=>{document.body.style.overflow="hidden",Me(!0)},Yr=()=>{document.body.style.overflow="auto",Me(!1)};function Qr(t,e,n){const r=t.slice();return r[5]=e[n].id,r[6]=e[n].name,r}function Zr(t){let e,n,s,i,l,u,a,c,p=t[6]+"";return{c(){e=$("li"),n=$("button"),s=w(p),l=x(),q(n,"type","button"),q(n,"class",i=t[5]===t[1].selectedCharacterId?"sidebar-button active":"sidebar-button"),q(e,"key",u=t[5])},m(r,i){y(r,e,i),g(e,n),g(n,s),g(e,l),a||(c=[k(n,"click",(function(){o(t[3](t[5]))&&t[3](t[5]).apply(this,arguments)})),k(n,"contextmenu",_((function(){o(ke(t[2],[t[5]]))&&ke(t[2],[t[5]]).apply(this,arguments)})))],a=!0)},p(r,o){t=r,1&o&&p!==(p=t[6]+"")&&S(s,p),3&o&&i!==(i=t[5]===t[1].selectedCharacterId?"sidebar-button active":"sidebar-button")&&q(n,"class",i),1&o&&u!==(u=t[5])&&q(e,"key",u)},d(t){t&&v(e),a=!1,r(c)}}}function to(e){let n,o,s,i,l,u,a,c,p=e[0],d=[];for(let t=0;t<p.length;t+=1)d[t]=Zr(Qr(e,p,t));return{c(){n=$("aside"),o=$("button"),o.textContent="X",s=x(),i=$("ul");for(let t=0;t<d.length;t+=1)d[t].c();l=x(),u=$("button"),u.textContent="Add New",q(o,"type","button"),q(o,"class","sidebar-button"),q(o,"title","Close Menu"),q(i,"class","list-clear"),q(u,"type","button"),q(u,"class","sidebar-button"),N(u,"active",e[1].newCharacter),q(n,"id","sidebar"),N(n,"active",e[1].menuOpen)},m(t,e){y(t,n,e),g(n,o),g(n,s),g(n,i);for(let t=0;t<d.length;t+=1)d[t].m(i,null);g(n,l),g(n,u),a||(c=[k(o,"click",Yr),k(u,"click",Ne)],a=!0)},p(t,[e]){if(15&e){let n;for(p=t[0],n=0;n<p.length;n+=1){const r=Qr(t,p,n);d[n]?d[n].p(r,e):(d[n]=Zr(r),d[n].c(),d[n].m(i,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=p.length}2&e&&N(u,"active",t[1].newCharacter),2&e&&N(n,"active",t[1].menuOpen)},i:t,o:t,d(t){t&&v(n),b(d,t),a=!1,r(c)}}}function eo(t,e,n){let r,o,s;a(t,nn,(t=>n(4,o=t))),a(t,Oe,(t=>n(1,s=t)));return t.$$.update=()=>{16&t.$$.dirty&&n(0,r=o.map((t=>{const{id:e,name:n}=JSON.parse(localStorage.getItem(`character:${t}`)||"{}");return{id:e,name:n}})))},[r,s,(t,e)=>{return confirm(`Delete ${e}?`)?(n=t,nn.update((t=>t.filter((t=>t!==n)))),void localStorage.removeItem(`character:${n}`)):null;var n},t=>()=>{Fe(t)},o]}class no extends st{constructor(t){super(),ot(this,t,eo,to,s,{})}}function ro(e){let n,r,o,s,i,l,a,c,p,d;return{c(){n=$("div"),r=$("p"),r.innerHTML="A browser based character sheet for<wbr/> MÖRK BORG.",o=x(),s=$("p"),i=$("button"),i.textContent="Get Started",l=x(),a=$("img"),q(i,"type","button"),q(i,"class","theme-white-button"),u(a.src,c="images/CompWith_MORKBORG_vert.svg")||q(a,"src","images/CompWith_MORKBORG_vert.svg"),q(a,"alt","Compatible with MÖRK BORG"),q(n,"id","welcome"),q(n,"class","svelte-knu7rg")},m(t,e){y(t,n,e),g(n,r),g(n,o),g(n,s),g(s,i),g(n,l),g(n,a),p||(d=k(i,"click",Ne),p=!0)},p:t,i:t,o:t,d(t){t&&v(n),p=!1,d()}}}class oo extends st{constructor(t){super(),ot(this,t,null,ro,s,{})}}function so(t){let e,n;return e=new oo({}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function io(t){let e,n;return e=new Vr({}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function lo(t){let e,n;return e=new yn({}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function uo(t){let e,n,r,o,s,i,l,u,a,c,p,d,f,m,h,b,w;const C=[lo,io,so],_=[];function j(t,e){return 1&e&&(u=null),t[0].newCharacter?0:(null==u&&(u=!Ut(t[0].selectedCharacterId)),u?1:2)}return a=j(t,-1),c=_[a]=C[a](t),d=new no({}),{c(){e=$("header"),n=$("h1"),n.textContent="SCVUMGRINDER",r=x(),o=$("button"),o.innerHTML="<div></div> \n        <div></div> \n        <div></div>",s=x(),i=$("main"),l=$("div"),c.c(),p=x(),tt(d.$$.fragment),f=x(),m=$("footer"),m.innerHTML='<p>Scvmgrinder is an independent production by James Krayer and is not affiliated with Ockult Örtmästare Games or Stockholm Kartell. It is published under the MÖRK BORG Third Party License.</p> \n\t<p>MÖRK BORG is copyright Ockult Örtmästare Games and Stockholm Kartell.</p> \n\t<p><a href="https://github.com/jkrayer/scvmgrinder">GitHub</a> |  <a href="https://morkborg.com/">MÖRK BORG</a></p>',q(o,"type","button"),q(o,"id","sidebar-button"),q(o,"title","Open Menu"),q(e,"id","global-header"),q(e,"class","theme-magenta row row-polar"),q(l,"id","stage"),q(i,"id","app"),q(m,"id","global-footer"),q(m,"class","theme-black")},m(t,u){y(t,e,u),g(e,n),g(e,r),g(e,o),y(t,s,u),y(t,i,u),g(i,l),_[a].m(l,null),g(i,p),et(d,i,null),y(t,f,u),y(t,m,u),h=!0,b||(w=k(o,"click",Xr),b=!0)},p(t,[e]){let n=a;a=j(t,e),a!==n&&(V(),Q(_[n],1,1,(()=>{_[n]=null})),X(),c=_[a],c||(c=_[a]=C[a](t),c.c()),Y(c,1),c.m(l,null))},i(t){h||(Y(c),Y(d.$$.fragment,t),h=!0)},o(t){Q(c),Q(d.$$.fragment,t),h=!1},d(t){t&&v(e),t&&v(s),t&&v(i),_[a].d(),nt(d),t&&v(f),t&&v(m),b=!1,w()}}}function ao(t,e,n){let r;return a(t,Oe,(t=>n(0,r=t))),[r]}return new class extends st{constructor(t){super(),ot(this,t,ao,uo,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
